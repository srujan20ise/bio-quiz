<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Biology Quiz</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: white;
  margin: 0;
  padding: 10px;
}
.container {
  max-width: 800px;
  margin: auto;
}
.question {
  margin-bottom: 15px;
}
.options label {
  display: block;
  margin: 5px 0;
}
button {
  padding: 10px 15px;
  font-size: 16px;
  margin-top: 10px;
}
#timer {
  font-size: 18px;
  color: #38bdf8;
  margin-bottom: 10px;
}
.correct { color: #22c55e; }
.wrong { color: #ef4444; }
</style>
</head>

<body>
<div class="container">
  <h2>Biology for Engineers â€“ Quiz</h2>
  <div id="timer">Time: 60:00</div>
  <form id="quizForm"></form>
  <button onclick="submitQuiz()">Submit Quiz</button>
  <div id="result"></div>
</div>

<script>
let questions = [];
let selectedQuestions = [];
let time = 3600;
let timerInterval;

fetch("questions.json")
  .then(res => res.json())
  .then(data => {
    questions = data;
    selectedQuestions = questions.sort(() => 0.5 - Math.random()).slice(0, 100);
    loadQuiz();
    startTimer();
  });

function loadQuiz() {
  const form = document.getElementById("quizForm");
  selectedQuestions.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `<p>${i+1}. ${q.question}</p>` +
      q.options.map(opt =>
        `<label>
          <input type="radio" name="q${i}" value="${opt}">
          ${opt}
        </label>`
      ).join("");
    form.appendChild(div);
  });
}

function startTimer() {
  timerInterval = setInterval(() => {
    time--;
    let min = Math.floor(time / 60);
    let sec = time % 60;
    document.getElementById("timer").innerText =
      `Time: ${min}:${sec.toString().padStart(2, "0")}`;
    if (time <= 0) {
      clearInterval(timerInterval);
      submitQuiz();
    }
  }, 1000);
}

function submitQuiz() {
  clearInterval(timerInterval);
  let score = 0;
  selectedQuestions.forEach((q, i) => {
    const ans = document.querySelector(`input[name="q${i}"]:checked`);
    const div = document.getElementsByClassName("question")[i];
    if (ans && ans.value === q.answer) {
      score++;
      div.innerHTML += `<p class="correct">Correct</p>`;
    } else {
      div.innerHTML += `<p class="wrong">Correct Answer: ${q.answer}</p>`;
    }
  });
  document.getElementById("result").innerHTML =
    `<h3>Your Score: ${score} / ${selectedQuestions.length}</h3>`;
}
</script>
</body>
</html>
